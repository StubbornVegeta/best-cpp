
# C++是如何工作的

假设我们有一些C++的源文件， 然后将这些源文件给编译器，编译器将其转变为二进制的东西，这些二进制的东西可能是某种库，或者是可执行的程序，这里主要讲可执行程序。

我们以这个HelloWorld程序为例进行讲解，这是一个非常基础的程序，但也包含不少的知识点。
```c++
#include <iostream>

int main()
{
    std::cout << "Hello World!" << std::endl;
    return 0;
}
```

## 程序编写
首先，我们要有`#include <iostream>`语句，这个叫预处理。`#`符号之后的都是预处理语句。编译器收到源文件后，看到这条语句，就会先处理这些预处理语句。这也是为什么它们被叫做预处理语句，因为它们在实际编译之前就被处理了。

`include`的意思就是它需要找到一个文件，在这个例子中，需要找到一个叫做`iostream`的文件，然后将这个文件中的所有内容复制到当前文件中。这些被包含的文件通常被称为“头文件”，后面我们将深入探讨头文件。

之所以需要包含`iostream`这个头文件，是因为我们需要一个被调用函数的声明（这里调用了`cout`，`endl`）。`std::cout`可以让我们在终端打印东西。

接下来是`main`函数，`main`函数非常重要，任何一个C++程序都有main函数，它是程序的入口，即当我们运行程序时，计算机就从这个函数开始执行代码，程序运行过程中计算机会逐行执行我们的代码。当然程序也可以通过控制语句或函数调用来中断或改变执行的顺序，但更多的还是一行一行的顺序执行。

在这个例子中最先被执行的是`std::cout << "Hello World!" << std::endl;`这句，然后是`return 0;`，运行完`main`中所有内容后，我们的程序就结束了。

你可能会注意到`main`函数名前存在一个词`int`，它是函数的返回类型，即`main`的返回是`int`类型。因此我们函数体内写了`return 0;`。但实际上，我们去掉这条语句，程序也能正确执行。
```c++
#include <iostream>

int main()
{
    std::cout << "Hello World!" << std::endl;
}
```
这是因为`main`函数比较特殊，它不一定需要返回值，如果你不返回值的话，它会默认你返回了0。这仅对main函数适用，是一种特殊情况。

你可能会注意到`main`函数中有一个奇怪的符号（`<<`），其实它只是写成这个样子，并没有更多的含义，这些看上去像左移运算符的东西叫做重载运算符，它看上去是运算符，其实是个函数。

在这个例子中，你可以将
```c++
std::cout << "Hello World!" << std::endl;
```
理解为
```c++
std::cout.print("Hello World!").print(std::endl);
```
这些符号其实就是函数。

这些符号还有另一层含义：将字符串`Hello World!`推送到`cout`，然后打印到终端，最后推送一个行结束符。`endl`会告诉终端跳转到下一行。

## 程序编译
现在我们已经有了源代码文件main.cpp，我们怎么把它转换成可运行的二进制文件？这里有几个步骤：
1. 预处理
2. 编译

### 预处理
预处理阶段会将头文件的内容复制过来




